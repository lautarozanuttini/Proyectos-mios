<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="estilo.css">
</head>

<body>
    <div id="aire">
        <div class="carcasa_atras">
            <div class="carcasa_adelante">
                <div class="luz"></div>
                <div class="display" id="display">
                    <p class="temperatura" id="temperatura">--</p>
                </div>
            </div>
            <div class="ventilas">
                <div class="paleta" id="paleta"></div>
                <div class="paleta" id="paleta"></div>
                <div class="paleta" id="paleta"></div>
            </div>
        </div>
        <div class="contenedorcontrol">
            <div class="control">
                <div class="display2">
                    <p id="temperaturacontrol" class="temperatura">--</p>
                </div>
                <button onclick="prender()" id="prender" onmousedown="beep.play()">Prender</button><br>
                <button class="botones" onclick="subir()" id="subir" disabled onmousedown="beep.play()">Subir</button> <button class="botones"
                    onclick="bajar()" id="bajar" disabled onmousedown="beep.play()">Bajar</button><br>
                <button class="botones" onclick="auto()" id="auto" disabled onmousedown="beep.play()">Auto</button><button class="botones"
                    onclick="mover()" id="mover" disabled onmousedown="beep.play()">Mover</button>
            </div>
        </div>
        <audio id="sonidoaire" src="Sonidos/aire.mp3" preload="auto"></audio>
    </div>
</body>
<script>
const tempcontrol = document.getElementById("temperaturacontrol");
const temp = document.querySelector(".temperatura");
const led = document.querySelector(".luz");          //Led de prendido
var paleta = document.querySelectorAll(".paleta");
const botones = document.querySelectorAll(".botones");
var valor = 24;
var estadoMovido = 0;

function prender() {
    prenderdisplay();
    prenderpaletas();
    prenderled();
    ocultarbotones();
    prenderdisplaycontrol()
    sonidoaireprendido()
}

//animacion de las paletas

function prenderpaletas() {
    paleta.forEach(paleta => {
        if (led.classList.contains("prendido")) {
            paleta.classList.remove("prendidas");
            paleta.classList.remove("auto");
            paleta.classList.add("apagadas");
        } else {
            paleta.classList.add("prendidas");
            paleta.classList.remove("apagadas");

        }
    })
}

function auto() {
    paleta.forEach(paleta => {
        paleta.classList.toggle("auto")
    })
}

function mover() {
    console.log("entrando", estadoMovido);
    if (estadoMovido >= 0 && estadoMovido < 4) {
        switch (estadoMovido) {
            case 0:
                paleta.forEach(x => x.classList.remove("prendidas"));
                paleta.forEach(x => x.classList.add("posicion0"));
                estadoMovido++;
                break;
                
            case 1:
                paleta.forEach(x => x.classList.remove("posicion0"));
                paleta.forEach(x => x.classList.add("posicion1"));
                estadoMovido++;
                break;
            case 2:
                paleta.forEach(x => x.classList.remove("posicion1"));
                paleta.forEach(x => x.classList.add("posicion2"));
                estadoMovido++;
                break;
            case 3:
                paleta.forEach(x => x.classList.remove("posicion2"));
                paleta.forEach(x => x.classList.add("prendidas"));
                estadoMovido++;
                break;                
        }
    } else {
        estadoMovido = 0;
    }
}

//Activa o desactiva los botones

function ocultarbotones() {
    botones.forEach(botones => {
        if (led.classList.contains("prendido")) {
            botones.removeAttribute("disabled")

        } else {
            botones.setAttribute("disabled", "true")
        }
    })

}

//prende el led de prendido

function prenderled() {
    led.classList.toggle("prendido");
}

//prende el display del aire

function prenderdisplay() {
    if (led.classList.contains("prendido")) {
        temp.innerHTML = "--"
    } else {
        temp.innerHTML = valor + "°";
    }
}

//prende el display del Control

function prenderdisplaycontrol() {
    if (led.classList.contains("prendido")) {
        tempcontrol.innerHTML = valor;
    } else {
        tempcontrol.innerHTML = "--"
    }
}

// Subir y Bajar la Temperatura

function subir() {
    if (valor > 17 && valor < 31) {
        temp.innerHTML = ++valor + "°";
        tempcontrol.innerHTML = valor;
    }
}

function bajar() {
    if (valor > 18 && valor < 32) {
        temp.innerHTML = --valor + "°";
        tempcontrol.innerHTML = valor;
    }
}

//sonido aire prendido

function sonidoaireprendido() {
    var sonidoaire = document.getElementById("sonidoaire")
    sonidoaire.volume = 0.2;
    return sonidoaire.paused ? sonidoaire.play() : sonidoaire.pause();
}

//sonido botones

var beep = new Audio();
beep.src = "Sonidos/beep.m4a";
</script>
</html>
